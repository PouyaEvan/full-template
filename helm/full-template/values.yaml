# Default values for full-template
# This is a YAML-formatted file.

# Global settings
global:
  environment: production

# Backend configuration
backend:
  enabled: true
  replicaCount: 2
  image:
    repository: ghcr.io/youruser/full-template-backend
    pullPolicy: IfNotPresent
    tag: "latest"
  
  service:
    type: ClusterIP
    port: 8080
  
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi
  
  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 80
  
  env:
    - name: PORT
      value: "8080"
    - name: DATABASE_URL
      valueFrom:
        secretKeyRef:
          name: full-template-secrets
          key: database-url
    - name: REDIS_ADDR
      value: "full-template-redis-master:6379"
    - name: JWT_SECRET
      valueFrom:
        secretKeyRef:
          name: full-template-secrets
          key: jwt-secret
  
  livenessProbe:
    httpGet:
      path: /api/health
      port: http
    initialDelaySeconds: 30
    periodSeconds: 10
  
  readinessProbe:
    httpGet:
      path: /api/health
      port: http
    initialDelaySeconds: 5
    periodSeconds: 5

# Frontend configuration
frontend:
  enabled: true
  replicaCount: 2
  image:
    repository: ghcr.io/youruser/full-template-frontend
    pullPolicy: IfNotPresent
    tag: "latest"
  
  service:
    type: ClusterIP
    port: 3000
  
  resources:
    limits:
      cpu: 300m
      memory: 256Mi
    requests:
      cpu: 50m
      memory: 64Mi
  
  env:
    - name: NEXT_PUBLIC_API_URL
      value: "/api"
    - name: NEXT_PUBLIC_WS_URL
      value: "ws://localhost/ws"

# Nginx Ingress configuration
nginx:
  enabled: true
  replicaCount: 1
  image:
    repository: nginx
    pullPolicy: IfNotPresent
    tag: "alpine"
  
  service:
    type: ClusterIP
    port: 80

# Ingress configuration
ingress:
  enabled: true
  className: nginx
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/proxy-body-size: "50m"
    cert-manager.io/cluster-issuer: letsencrypt-prod
  hosts:
    - host: example.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: full-template-tls
      hosts:
        - example.com

# PostgreSQL configuration (Bitnami chart)
postgresql:
  enabled: true
  auth:
    username: appuser
    password: changeme
    database: appdb
  primary:
    persistence:
      enabled: true
      size: 10Gi
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 100m
        memory: 128Mi

# Redis configuration (Bitnami chart)
redis:
  enabled: true
  architecture: standalone
  auth:
    enabled: false
  master:
    persistence:
      enabled: true
      size: 1Gi
    resources:
      limits:
        cpu: 200m
        memory: 256Mi
      requests:
        cpu: 50m
        memory: 64Mi

# Secrets (should be overridden in production)
secrets:
  databaseUrl: "postgresql://appuser:changeme@full-template-postgresql:5432/appdb?sslmode=disable"
  jwtSecret: "your-256-bit-secret"
  zarinpalMerchantId: ""
  vandarApiKey: ""
  senatorApiKey: ""
  s3AccessKey: ""
  s3SecretKey: ""

# Service Account
serviceAccount:
  create: true
  annotations: {}
  name: ""

# Pod annotations
podAnnotations: {}

# Pod security context
podSecurityContext: {}

# Security context
securityContext: {}

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}
